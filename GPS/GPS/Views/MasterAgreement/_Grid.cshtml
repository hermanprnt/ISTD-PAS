@using GPS.Models.Master
@{
    List<MasterAgreement> ListMasterAgreement = ViewData["ListMasterAgreement"] != null ? (List<MasterAgreement>)ViewData["ListMasterAgreement"] : new List<MasterAgreement>();
}

<style type="text/css">
    .close {
        opacity: 1;
    }

    table {
        table-layout: fixed;
    }

    td {
        overflow: hidden;
        white-space: nowrap;
        width: 100px;
        border: solid 1px #000;
    }
</style>


<div class="v-space"></div>
<div class="row">
    <div class="table-responsive col-xs-12 col-sm-12" style="overflow: hidden;">
        <div style="border: 1pt solid #ccc;">
            <div id="tScrollHead" style="width: 98.5%; overflow: hidden;">
                <table id="dynamic-table" class="table table-striped table-bordered table-condensed table-fixed" style="width: 1300px; max-width: 2900px; ">
                    <thead>
                        <tr>
                            <th style="width:20px" class="grid-checkbox-col"></th>
                            <th style="width:30px">No</th>
                            <th style="width:30px" hidden>ID</th>
                            <th style="width:80px">Vendor Code</th>
                            <th style="width:200px">Vendor Name</th>
                            <th class="_toggle-detail" style="width:50px">Purch Group</th>
                            <th class="_toggle-detail" style="width:150px">Buyer</th>
                            <th class="_toggle-detail" width="150px">Email Buyer</th>
                            <th class="_toggle-detail" width="150px">Email SH</th>
                            <th class="_toggle-detail" width="150px">Email DPH</th>
                            <th class="_toggle-detail" width="150px">Email Legal</th>
                            <th style="width:250px">Agreement No</th>
                            <th style="width:100px">Amount</th>
                            <th style="width:70px">Attachment</th>
                            <th style="width:80px">Start Date</th>
                            <th style="width:80px">Expired Date</th>
                            <th style="width:130px">Status</th>
                            <th style="width:200px">Next Action</th>
                            <th class="_toggle-detail" width="200px">Created By</th>
                            <th class="_toggle-detail" width="200px">Created Date</th>
                            <th class="_toggle-detail" width="200px">Changed By</th>
                            <th class="_toggle-detail" width="200px">Changed Date</th>
                        </tr>
                    </thead>
                </table>
            </div>
            <div id="tScrollBody" style="overflow: scroll; height: 350px;">
                <table id="tblScroll" class="table table-striped table-bordered table-condensed table-fixed"
                       style="width: 1300px; max-width: 2900px; table-layout: fixed; ">
                    <tbody>
                        @{
                            if (ListMasterAgreement.Count > 0)
                            {
                                foreach (MasterAgreement item in ListMasterAgreement)
                                {
                                                <tr>
                                                    <td class="text-center grid-checkbox-col" style="width:20px">
                                                        <input id="cb-@item.Number" class="grid-checkbox grid-checkbox-body" type="checkbox"
                                                               data-vendor_cd="@item.VENDOR_CODE"
                                                               data-agreement_no="@item.AGREEMENT_NO"
                                                               data-expired_date="@item.EXP_DATE"
                                                               data-id="@item.ID" />
                                                    </td>
                                                    <td class="text-center" style="width:30px" hidden>@item.ID</td>
                                                    <td class="text-center" style="width:30px">@item.Number</td>
                                                    <td class="text-center" style="width:80px">@item.VENDOR_CODE</td>
                                                    <td class="text-left" style="width:200px">@item.VENDOR_NAME</td>
                                                    <td class="_toggle-detail text-left" style="width:50px">@item.PURCHASING_GROUP</td>
                                                    <td class="_toggle-detail text-left" style="width:150px;">@item.BUYER</td>
                                                    <td class="_toggle-detail text-left" style="width:150px">@item.EMAIL_BUYER</td>
                                                    <td class="_toggle-detail text-left" style="width:150px">@item.EMAIL_SH</td>
                                                    <td class="_toggle-detail text-left" style="width:150px">@item.EMAIL_DPH</td>
                                                    <td class="_toggle-detail text-left" style="width:150px">@item.EMAIL_LEGAL</td>
                                                    <td class="text-left" style="width:250px">@item.AGREEMENT_NO</td>
                                                    <td class="text-right" style="width:100px">@item.AMOUNT</td>
                                                    @if (string.IsNullOrEmpty(item.AN_ATTACHMENT))
                                                    {
                                                        <td class="text-center" style="width: 70px">NO FILE</td>
                                                    }
                                                    else
                                                    {
                                                        <td class="text-center" style="width: 70px">
                                                            <a href="/MasterAgreement/DownloadFile?filePath=@item.AN_ATTACHMENT">
                                                                <img src="/Content/img/file-complete-icon.png" style="width: 20px; height: 20px" title="Download" />
                                                            </a>
                                                        </td>
                                                    }
                                                    <td class="text-center" style="width:80px">@item.START_DATE</td>
                                                    @if (item.STATUS.Trim() == "1")
                                                    {
                                                        <td class="text-center" style="width: 80px;background-color: lawngreen">@item.EXP_DATE</td>
                                                    }
                                                    else if (item.STATUS.Trim() == "3")
                                                    {
                                                        <td class="text-center" style="width: 80px;background-color: yellow">@item.EXP_DATE</td>
                                                    }
                                                    else if (item.STATUS.Trim() == "4")
                                                    {
                                                        <td class="text-center" style="width: 80px;background-color: red">@item.EXP_DATE</td>
                                                    }
                                                    else
                                                    {
                                                        <td class="text-center" style="width: 80px;">@item.EXP_DATE</td>
                                                    }

                                                    @if (item.STATUS.Trim() == "1")
                                                    {
                                                        <td class="text-left" style="width: 130px;background-color: lawngreen">@item.STATUS_STRING</td>
                                                    }
                                                    else if (item.STATUS.Trim() == "3")
                                                    {
                                                        <td class="text-left" style="width: 130px;background-color: yellow">@item.STATUS_STRING</td>
                                                    }
                                                    else if (item.STATUS.Trim() == "4")
                                                    {
                                                        <td class="text-left" style="width:130px;background-color:red">@item.STATUS_STRING</td>
                                                    }
                                                    else
                                                    {
                                                        <td class="text-left" style="width: 130px">@item.STATUS_STRING</td>
                                                    }

                                                    <td class="text-left" style="width:200px">@item.NEXT_ACTION</td>
                                                    <td class="_toggle-detail text-left" style="width:200px">@item.CREATED_BY</td>
                                                    <td class="_toggle-detail text-center" style="width:200px">@item.CREATED_DT</td>
                                                    <td class="_toggle-detail text-left" style="width:200px">@item.CHANGED_BY</td>
                                                    <td class="_toggle-detail text-center" style="width:200px">@item.CHANGED_DT</td>

                                                </tr>

                                }
                            }
                            else
                            {
                                <tr>
                                    <td colspan="12" class="text-center">
                                        No data retrieved.
                                    </td>
                                </tr>
                            }
                        }
                    </tbody>
                </table>
            </div>
            <div>
                <table class="table table-striped table-bordered table-condensed table-fixed" style="width: 100%">
                    <tfoot>
                        <tr>
                            <td class="col-xs-8 listdata">
                                @Html.Partial("_Paging")
                            </td>
                        </tr>
                    </tfoot>
                </table>
            </div>
        </div>
    </div>
</div>

<script>
    $("#tScrollBody").scroll(function () {
        $("#tScrollHead").scrollLeft($("#tScrollBody").scrollLeft());
    });

</script>